<!--Author: W3layouts
Author URL: http://w3layouts.com
License: Creative Commons Attribution 3.0 Unported
License URL: http://creativecommons.org/licenses/by/3.0/
-->
<!DOCTYPE HTML>
<%@page import="com.bean.Request"%>
<%@page import="com.bean.Hospital"%>
<%@page import="com.dao.HospitalDAOImpl"%>
<%@page import="com.bean.BloodBank"%>
<%@page import="java.util.List"%>
<html>
<head>
<title>IBMS</title>
<link href="css/bootstrap.css" rel="stylesheet" type="text/css"
	media="all" />
<script src="js/jquery-1.11.0.min.js"></script>
<link href="css/style.css" rel="stylesheet" type="text/css" media="all" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="keywords" content="" />
<script type="application/x-javascript">
	
	 addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } 

</script>
<!--Google Fonts-->
<link href='//fonts.googleapis.com/css?family=Squada+One'
	rel='stylesheet' type='text/css' />
<link
	href='//fonts.googleapis.com/css?family=Source+Sans+Pro:400,200,300,600,700,900'
	rel='stylesheet' type='text/css' />
<script type="text/javascript" src="js/move-top.js"></script>
<script type="text/javascript" src="js/easing.js"></script>
<script type="text/javascript">
	jQuery(document).ready(function($) {
		$(".scroll").click(function(event) {
			event.preventDefault();
			$('html,body').animate({
				scrollTop : $(this.hash).offset().top
			}, 1000);
		});
	});
	function getParameterByName(name) {
	    name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
	    var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
	        results = regex.exec(location.search);
	    return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
	}
	var prodId = getParameterByName('submit');
	
// 	alert(prodId.length);
	if(prodId.length !=0){
		alert('Request Submitted');
	}
</script>
<script type="text/javascript" src="js/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="js/jquery.validate.min.js"></script>
<script src="//code.jquery.com/jquery-1.9.1.js"></script>
<script
	src="//ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js"></script>
<script src="js/RequestForm.js"></script>
<script
	src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
<script type="text/javascript" src="js/jquery.validate.min.js"></script>
<script src="//code.jquery.com/jquery-1.9.1.js"></script>
<script
	src="http://jqueryvalidation.org/files/dist/jquery.validate.min.js"></script>
<script
	src="http://jqueryvalidation.org/files/dist/additional-methods.min.js"></script>
<script src="js/editDetailsValidate.js"></script>
<style type="text/css">
#center {
	margin-left: 50px;
}

.my-error-class {
	color: #FF0000; /* red */
	display: inline;
}

/* .my-valid-class { */
/* 	color: #00CC00; /* green */
* /
	/* } */  

.error-password {
	color: #FF0000;
	display: none;
}

.my-error-class {
	color: #FF0000; /* red */
	display: inline;
}
</style>
</head>

<body>
	<!--banner start here-->
	<div class="banner-two">
		<div class="header">
			<div class="container">
				<div class="header-main">
					<div class="logo">
						<h1>
							<a href=""> IBMS Connect</a>
						</h1>
					</div>
					<div class="top-nav">
						<span class="menu"> <img src="images/icon.png" alt="" /></span>
						<nav class="cl-effect-1">
							<ul class="res">
								<li><a href="index.html">Home</a></li>
								<li><a class="active" href="about.jsp">About</a></li>
								<li><a href="services.html">Services</a></li>
								<li><a href="gallery.html">Gallery</a></li>
								<li><a href="shortcords.html">Short Codes</a></li>
								<li><a href="contact.html">Contact</a></li>
							</ul>
						</nav>
						<!-- script-for-menu -->
						<script>
							$("span.menu").click(function() {
								$("ul.res").slideToggle(300, function() {
									// Animation complete.
								});
							});
						</script>
						<!-- /script-for-menu -->
					</div>
					<div class="clearfix"></div>
				</div>
			</div>
		</div>
	</div>
	<!--banner end here-->
	<!--about start here-->






	<div class="we-do">
		<div class="container">
			<div class="page-header">
				<nav id="menu">
					<!-- displayHandle('requestBloodTab','requestForm'); -->
					<ul class="nav nav-tabs" role="tablist">
						<li role="presentation" class="active" id="listBanksTab"><a
							onclick="return displayHandle('listBanksTab','listAllBB');">List
								Bloodbanks</a></li>
						<li role="presentation" id="editDetailsTab"><a
							onclick="return displayHandle('editDetailsTab','editDetails');">Edit
								details</a></li>
						<li role="presentation" id="requestBloodTab"><a
							onclick="return displayHandle('requestBloodTab','requestForm');">Request
								Blood</a></li>
						<li role="presentation" id="cancelRequestTab"><a
							onclick="return displayHandle('cancelRequestTab','cancelRequest');">Cancel
								Requests</a></li>
						<li role="presentation" id="viewRequestTab"><a
							onclick="return displayHandle('viewRequestTab','listAllRequests');">My
								Requests</a></li>
					</ul>
				</nav>

			</div>






			<div id="listAllBB">
				<!-- 				style="display: none"> -->
				<h2>All Bloodbanks</h2>
				<%=((Hospital) session.getAttribute("hospital"))
					.getHospital_name()%>
				<p>
				<div class="bs-example" data-example-id="contextual-table"
					style="border: 1px solid #eee">
					<table class="table">
						<thead>
							<tr>
								<th>#</th>
								<th>Bloodbank Name</th>
								<th>Address</th>
								<th colspan="2">Contact No.</th>
							</tr>
						</thead>
						<tbody>
							<%
								List<BloodBank> bbs = (new HospitalDAOImpl()).getAllBloodbanks();
																											int k = 1;
																											if (bbs != null)
																												for (BloodBank b : bbs) {
							%>
							<tr class="info">
								<th scope="row"><%=k%></th>


								<td><a href=""><%=b.getBloodBank_name()%> </a></td>
								<td><%=b.getBloodBank_address()%></td>
								<td><%=b.getBloodBank_telephoneNo()%></td>
								<td><%=b.getBloodBank_mobileNo()%></td>

								<%
									k++;
																																	}
								%>

							</tr>

						</tbody>
					</table>
				</div>
			</div>
			<div id="cancelRequest" style="display: none">

				Get Details


				<div class="bs-example" data-example-id="contextual-table"
					style="border: 1px solid #eee">
					<table class="table">
						<thead>
							<tr>
								<th>#</th>
								<th>Request ID</th>
								<th>Patient's Name</th>
								<th>Blood Bank</th>
								<th>Quantity</th>
								<th>Delivery Date And Time</th>

							</tr>
						</thead>
						<tbody>
							<tr class="info">
								<th scope="row">1</th>

								<%
									Hospital hospital = (Hospital) session.getAttribute("hospital");
															List<Request> requests = (new HospitalDAOImpl()).seeAllRequests(hospital);
															for (Request req : requests) {
								%>
								<td><Details>
										<summary><%=req.getRequestId()%>

										</summary>
										<p>
											Doctor's Name :
											<%=req.getDoctor_name()%>
											<br> Blood Type :
											<%=req.getBloodType()%>
											<br> Status :
											<%=req.getStatus()%>
											<br>
										</p>
									</Details></td>
								<td><%=req.getPatient_name()%></td>
								<td><%=req.getBloodBank()%></td>
								<td><%=req.getQuantity_required()%></td>
								<td><%=req.getDelivery_date_time()%></td>
								<td><input type="button" name="Cancel_Request"
									value="Cancel Request"
									onclick="<%new HospitalDAOImpl().cancelRequest(req.getRequestId());%>"></td>
								<%
									}
								%>
							</tr>

						</tbody>
					</table>
				</div>




			</div>
			<div id="requestForm" style="display: none">
				<form id="request-form" name="request" action="RequestSubmission"
					method="post">
					<div>
						Patient's Name: <input id="patientName" name="patientname"
							type="text">
					</div>
					<div>
						Doctor's Name: <input id="doctorName" name="doctorname"
							type="text">
					</div>
					<div>
						Required Blood Group: <select name="rbg">
							<option value="default">-Choose-</option>
							<option value="O_POSITIVE">O+</option>
							<option value="O_NEGATIVE">O-</option>
							<option value="A_POSITIVE">A+</option>
							<option value="A_NEGATIVE">A-</option>
							<option value="B_POSITIVE">B+</option>
							<option value="B_NEGATIVE">B-</option>
							<option value="AB_POSITIVE">AB+</option>
							<option value="AB_NEGATIVE">AB-</option>
						</select>
					</div>
					<div>
						Time of requirement:<input name="requiredtime" type="date">
					</div>
					<div>
						Units:<input id="units" type="number" name="units">
					</div>
					<div>
						Type of blood: <select name="bloodtype">
							<option value="default">-Choose-</option>
							<option value="PRC">PRC</option>
							<option value="PC">PC</option>
							<option value="FFP">FFP</option>
							<option value="WB">Whole Blood</option>
						</select>
					</div>
					<input type="submit" value="Submit">
				</form>
				<%
					List<String> errorMessages = (List<String>) session
														.getAttribute("errorMessages");
												if (errorMessages != null) {
													for (String s : errorMessages) {
														out.println("<BR>");
														out.println(s);
													}
												}
				%>
			</div>
			<div id="listAllRequests" style="display: none">
				<section id="container">
					<div class="we-do">
						<div class="container">
							<div class="page-header">
								<nav id="menu">
									<ul class="nav nav-tabs" role="tablist">
										<li role="presentation" class="active" id="allTab"><a
											onclick="return displayHandle('allTab','allRequests');">All</a></li>
										<li role="presentation" id="fulfilledTab"><a
											onclick="return displayHandle('fulfilledTab','fulfilledRequests');">Fulfilled</a></li>
										<li role="presentation" id="inprogressTab"><a
											onclick="return displayHandle('inprogressTab','progressRequests');">In
												progress</a></li>
										<li role="presentation" id="cancelledTab"><a
											onclick="return displayHandle('cancelledTab','cancelledRequests');">Cancelled</a></li>
									</ul>
								</nav>

								<section id="content"></section>

								<footer>
									<p>Copyright &#169; 2012 Ben HartLenn</p>
									<p>All Rights Reserved</p>
								</footer>
							</div>
						</div>
					</div>
				</section>
				<div id="allRequests" style="display: none">

					Get Details


					<div class="bs-example" data-example-id="contextual-table"
						style="border: 1px solid #eee">
						<table class="table">
							<thead>
								<tr>
									<th>#</th>
									<th>Request ID</th>
									<th>Patient's Name</th>
									<th>Blood Bank</th>
									<th>Quantity</th>
									<th>Delivery Date And Time</th>

								</tr>
							</thead>
							<tbody>
								<tr class="info">
									<th scope="row">1</th>

									<%
										hospital = (Hospital) session.getAttribute("hospital");
																																					requests = (new HospitalDAOImpl()).seeAllRequests(hospital);
																																					for (Request req : requests) {
									%>
									<td><Details>
											<summary><%=req.getRequestId()%>

											</summary>
											<p>
												Doctor's Name :
												<%=req.getDoctor_name()%>
												<br> Blood Type :
												<%=req.getBloodType()%>
												<br> Status :
												<%=req.getStatus()%>
												<br>
											</p>
										</Details></td>
									<td><%=req.getPatient_name()%></td>
									<td><%=req.getBloodBank()%></td>
									<td><%=req.getQuantity_required()%></td>
									<td><%=req.getDelivery_date_time()%></td>
									<td><input type="button" name="Cancel_Request"
										value="Cancel Request"
										onclick="<%new HospitalDAOImpl().cancelRequest(req.getRequestId());%>"></td>
									<%
										}
									%>
								</tr>

							</tbody>
						</table>
					</div>




				</div>
				<div id="fulfilledRequests" style="display: none">

					Get Details


					<div class="bs-example" data-example-id="contextual-table"
						style="border: 1px solid #eee">
						<table class="table">
							<thead>
								<tr>
									<th>#</th>
									<th>Request ID</th>
									<th>Patient's Name</th>
									<th>Blood Bank</th>
									<th>Quantity</th>
									<th>Delivery Date And Time</th>

								</tr>
							</thead>
							<tbody>
								<tr class="info">
									<th scope="row">1</th>

									<%
										hospital = (Hospital) session.getAttribute("hospital");
																																					requests = (new HospitalDAOImpl()).seeFulfilledRequests(hospital);
																																					for (Request req : requests) {
									%>
									<td><Details>
											<summary><%=req.getRequestId()%>

											</summary>
											<p>
												Doctor's Name :
												<%=req.getDoctor_name()%>
												<br> Blood Type :
												<%=req.getBloodType()%>
												<br> Status :
												<%=req.getStatus()%>
												<br>
											</p>
										</Details></td>
									<td><%=req.getPatient_name()%></td>
									<td><%=req.getBloodBank()%></td>
									<td><%=req.getQuantity_required()%></td>
									<td><%=req.getDelivery_date_time()%></td>
									<td><input type="button" name="Cancel_Request"
										value="Cancel Request"
										onclick="<%new HospitalDAOImpl().cancelRequest(req.getRequestId());%>"></td>
									<%
										}
									%>
								</tr>

							</tbody>
						</table>
					</div>




				</div>
				<div id="progressRequests" style="display: none">

					Get Details


					<div class="bs-example" data-example-id="contextual-table"
						style="border: 1px solid #eee">
						<table class="table">
							<thead>
								<tr>
									<th>#</th>
									<th>Request ID</th>
									<th>Patient's Name</th>
									<th>Blood Bank</th>
									<th>Quantity</th>
									<th>Delivery Date And Time</th>

								</tr>
							</thead>
							<tbody>
								<tr class="info">
									<th scope="row">1</th>

									<%
										hospital = (Hospital) session.getAttribute("hospital");
																																					requests = (new HospitalDAOImpl()).seeInProgressRequests(hospital);
																																					for (Request req : requests) {
									%>
									<td><Details>
											<summary><%=req.getRequestId()%>

											</summary>
											<p>
												Doctor's Name :
												<%=req.getDoctor_name()%>
												<br> Blood Type :
												<%=req.getBloodType()%>
												<br> Status :
												<%=req.getStatus()%>
												<br>
											</p>
										</Details></td>
									<td><%=req.getPatient_name()%></td>
									<td><%=req.getBloodBank()%></td>
									<td><%=req.getQuantity_required()%></td>
									<td><%=req.getDelivery_date_time()%></td>
									<td><input type="button" name="Cancel_Request"
										value="Cancel Request"
										onclick="<%new HospitalDAOImpl().cancelRequest(req.getRequestId());%>"></td>
									<%
										}
									%>
								</tr>

							</tbody>
						</table>
					</div>




				</div>
				<div id="cancelledRequests" style="display: none">

					Get Details


					<div class="bs-example" data-example-id="contextual-table"
						style="border: 1px solid #eee">
						<table class="table">
							<thead>
								<tr>
									<th>#</th>
									<th>Request ID</th>
									<th>Patient's Name</th>
									<th>Blood Bank</th>
									<th>Quantity</th>
									<th>Delivery Date And Time</th>

								</tr>
							</thead>
							<tbody>
								<tr class="info">
									<th scope="row">1</th>

									<%
										hospital = (Hospital) session.getAttribute("hospital");
																																					requests = (new HospitalDAOImpl()).seeCancelledRequests(hospital);
																																					for (Request req : requests) {
									%>
									<td><Details>
											<summary><%=req.getRequestId()%>

											</summary>
											<p>
												Doctor's Name :
												<%=req.getDoctor_name()%>
												<br> Blood Type :
												<%=req.getBloodType()%>
												<br> Status :
												<%=req.getStatus()%>
												<br>
											</p>
										</Details></td>
									<td><%=req.getPatient_name()%></td>
									<td><%=req.getBloodBank()%></td>
									<td><%=req.getQuantity_required()%></td>
									<td><%=req.getDelivery_date_time()%></td>
									<td><input type="button" name="Cancel_Request"
										value="Cancel Request"
										onclick="<%new HospitalDAOImpl().cancelRequest(req.getRequestId());%>"></td>
									<%
										}
									%>
								</tr>

							</tbody>
						</table>
					</div>




				</div>

			</div>

			<div id="editDetails" style="display: none">
				<form action="EditDetailsHospitalServlet" method="post"
					id="edit-form">
					
						<%
							Hospital h=(Hospital) session.getAttribute("hospital");
						%><table>
							<tr>
								<td>Hospital Name:</td>
								<td><%=h.getHospital_name()%></td>
							</tr>
							<tr>
								<td>Email:</td>
								<td><%=h.getHospital_email()%></td>
							</tr>
							<tr>
								<td> 
								<a href="editPassword.jsp?type=h">Edit Password</a></td>
							</tr>							
							<tr>
							<tr>
							<td>Officer's Name:</td>
							<td><%=h.getOfficer_name()%></td>
							</tr>
							<tr>
							<td><input type="button" name="change1"
								value="Change offficer" id="change_off"
								onclick="return changeOfficer()"></td>
							<td>

								<div id="ChangeOfficer" style="display: none">

									Enter new Officer<input type="text" name="newOfficer">

								</div>

							</td>
							</tr>

							<tr>
								<td>Contact No.:</td>
								<td><%=h.getHospital_contactNo()%></td>
								<td><input type="button" name="change2"
									value="Change Contact" id="change_con"
									onclick="return changeContact()"></td>
								<td>

									<div id="ChangeContact" style="display: none">

										Enter new Contact<input type="text" name="newNumber">
										<!-- 									<input type="submit" name="Change"> -->
									</div>

								</td>
							</tr>
							<tr>
								<td>License No.:</td>
								<td><%=h.getHospital_lisenceNo()%></td>
							</tr>
							<tr>
								<td>Certification:</td>
								<td><%=h.getHospital_certification()%></td>
							</tr>
							<tr>
								<td>Address:</td>
								<td><%=h.getHospital_address()%></td>
							</tr>
							<tr>
								<td>Pincode:</td>
								<td><%=h.getHospital_pin()%></td>
							</tr>
						</table>
						<input type="submit" name="Change"">
					
				</form>
			</div>


		</div>
	</div>
	</div>


	<script>
	function displayHandle(tab,div) {
		
// 		alert('till here');
// 		alert("'"+tab+"'");
		
		document.getElementById("listBanksTab").setAttribute("class", "passive");
		
		document.getElementById("editDetailsTab").setAttribute("class", "passive");
		document.getElementById("requestBloodTab").setAttribute("class", "passive");
		document.getElementById("cancelRequestTab")
				.setAttribute("class", "passive");
		document.getElementById("viewRequestTab").setAttribute("class", "passive");
		document.getElementById("allTab").setAttribute("class", "passive");
		
		document.getElementById("fulfilledTab").setAttribute("class", "passive");
		document.getElementById("inprogressTab").setAttribute("class", "passive");
		document.getElementById("cancelledTab").setAttribute("class", "passive");
		document.getElementById("editDetailsTab").setAttribute("class", "passive");
		
		document.getElementById("listAllRequests").style.display = "none";
		document.getElementById("listAllBB").style.display = "none";
		document.getElementById("cancelRequest").style.display = "none";
		document.getElementById("requestForm").style.display = "none";
		document.getElementById("allRequests").style.display = "none";
		document.getElementById("fulfilledRequests").style.display = "none";
		document.getElementById("progressRequests").style.display = "none";
		document.getElementById("cancelledRequests").style.display = "none";
		document.getElementById("editDetails").style.display = "none";
		
		document.getElementById(tab).setAttribute("class", "active");
		document.getElementById(div).style.display = "none";
// 		alert('b1');
		if(tab.localeCompare("fulfilledTab") == 0 || tab.localeCompare("inprogressTab") == 0 || tab.localeCompare("cancelledTab") == 0){
// 			alert('hey1');
			document.getElementById("listAllRequests").style.display = "block";
// 			alert('hey');
		}
// 		alert('b2');
		document.getElementById(tab).setAttribute("class", "active");
		//alert('b25');
		document.getElementById(div).style.display = "block";
// 		alert('b3');
		
// 		alert('b44');
		if(tab.localeCompare("viewRequestTab") == 0){
			//alert('b4');
			document.getElementById("allRequests").style.display = "block";
			//alert('b5');
			document.getElementById("allTab").setAttribute("class", "active");
			//alert('b6');
					
		}
		
		
		

	}
	
	function changeOfficer() {
		
		document.getElementById("ChangeOfficer").style.display = "block";
		document.getElementById("change_off").style.visibility = "hidden";
	}
	
	function changeContact() {
		
		document.getElementById("ChangeContact").style.display = "block";
		document.getElementById("change_con").style.visibility = "hidden";
	}
	
	</script>
</body>
</html>